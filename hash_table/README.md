This is in progress, the aim is to replace all variable look ups with a hash table.
